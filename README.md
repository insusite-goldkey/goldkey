# 골드키지사 AI 마스터 보험봇 (RAG 시스템 + AI 이미지 상담 탑재)

## 설치 및 실행 방법

### 1. 의존성 설치
```bash
pip install -r requirements.txt
```

### 2. 실행 방법
```bash
streamlit run insurance_bot.py
```

### 3. RAG 시스템 테스트 데이터 생성 (선택사항)
```bash
python rag_sample_data.py
```

## 주요 기능

- 16개 독립 섹션으로 구성된 보험 컨설팅 시스템
- **RAG(Retrieval-Augmented Generation) 시스템 탑재**
- **AI 이미지 상담 전문 모델** (보험 증권, 진단서, 사고 현장 사진 분석)
- 음성 인식 및 TTS 기능
- Gemini AI 기반 분석 엔진
- 건보료 기반 소득 역산 계산
- 3층 연금 시뮬레이션
- 6대 법령 기반 보상 분석

## AI 이미지 상담 기능

### 🖼️ 지원 파일 형식
- **이미지**: JPG, JPEG, PNG, BMP
- **문서**: PDF (텍스트 추출 후 분석)

### 🎯 전문 분석 유형
- **보험 증권 분석**: 보장 금액, 담보 내용, 가입 조건 등 정밀 분석
- **진단서 분석**: 병명, 진단일, 의사 소견에 따른 보험금 지급 가능성 분석
- **사고 현장 분석**: 파손 정도, 과실 비율, 관련 법률적 쟁점 분석
- **의료 기록 분석**: 치료 기록, 비용明细, 보상 적용 범위 분석
- **기타**: 보험 관련 모든 이미지 자문

### 🤖 AI 분석 프로세스
1. **이미지 업로드**: 다중 파일 업로드 지원
2. **분석 유형 선택**: 전문 분석 카테고리 지정
3. **특정 요청사항**: 상세 분석 요구사항 입력
4. **AI 정밀 분석**: Gemini Vision 모델로 텍스트 인식 및 분석
5. **전문가 상담 결과**: 30년 경력 이세윤 설계사 관점의 조언 제공

## RAG 시스템 기능

### 📚 지식베이스 관리
- PDF, DOCX, TXT 파일 업로드 가능
- 자동 텍스트 추출 및 청킹(Chunking)
- 한국어 임베딩 모델 사용 (jhgan/ko-sroberta-multitask)
- FAISS 벡터 데이터베이스로 빠른 유사도 검색

### 🔍 지능형 검색
- 사용자 질문과 관련된 문서 자동 검색
- 검색 결과를 AI 분석에 통합
- 유사도 점수 및 출처 표시

## API 설정

사이드바에서 Gemini API Key를 설정해야 합니다.

## RAG 시스템 사용법

1. **지식베이스 구축**: 사이드바에서 보험 관련 문서 업로드
2. **자동 처리**: 시스템이 자동으로 텍스트 추출 및 임베딩
3. **지능 검색**: 상담 시 관련 문서 자동 검색 및 활용

## 에러 수정 내용

1. 문자열 변수 할당 오류 수정
2. JavaScript 함수 괄호 수정
3. API 키 설정 로직 개선
4. 예외 처리 강화
5. 들여쓰기 및 구문 오류 수정
6. **RAG 시스템 통합 완료**
